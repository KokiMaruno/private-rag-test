#!/usr/bin/env python
"""
惑星ボー神話のサンプルデータを生成するスクリプト
各項目を個別のテキストファイルとして保存する
"""
import os
import json
import argparse
from pathlib import Path

# 惑星ボー神話の設定
BOE_MYTHOLOGY = [
    {
        "id": "001",
        "category": "人物・組織",
        "title": "サン・ジュカール",
        "content": "サン・ジュカールは惑星ボーの北半球の8割を占めるテシム皇国の初代皇帝であり、その英雄的活躍で知られる。30歳の時に惑星ボーに現れた、その地を荒らす魔物ジャヒルを打ち倒して国を建てたとされる。"
    },
    {
        "id": "002",
        "category": "人物・組織",
        "title": "サン・ジュカールの起源",
        "content": "サン・ジュカールの生まれは不明だが、伝説によれば別の星系からの来訪者であるという説もある。その卓越した戦闘能力と知恵は超常的とも評される。"
    },
    {
        "id": "003",
        "category": "人物・組織",
        "title": "テリペ王子",
        "content": "サン・ジュカールの長子テリペはその弟サン・ジスバと骨肉の争いを繰り広げた。彼は父の武勇を受け継ぎ、多くの戦いで勝利したが、最終的には弟との戦いに敗れた。"
    },
    {
        "id": "004",
        "category": "人物・組織",
        "title": "エシム王国",
        "content": "戦いの末にテリペは未開の地であった惑星ボーの南半球に逃れ、エシム王国を打ち立てた。このエシム王国はテシム皇国とは異なる文化と技術を発展させ、現在も二大国として並び立つ。"
    },
    {
        "id": "005",
        "category": "人物・組織",
        "title": "サン・ジスバ",
        "content": "サン・ジスバは第二代テシム皇帝として50年間統治し、テシム文化の基礎を築いた。兄テリペとの戦いの後、彼は国内の改革に集中し、「テシム法典」を制定した。"
    },
    {
        "id": "006",
        "category": "人物・組織",
        "title": "カロン・ジスバ",
        "content": "サン・ジスバの孫カロン・ジスバは宇宙航行技術を開発し、近隣の惑星ミロドへの初めての有人飛行を成功させた。彼は「空の征服者」の称号を持つ。"
    },
    {
        "id": "007",
        "category": "地理・世界観",
        "title": "惑星ボーの月",
        "content": "惑星ボーは3つの月（クレル、ファラン、ズート）を持ち、それぞれに独自の神話がある。クレルは最も大きく、「守護者の月」と呼ばれる。ファランは赤みがかった色で「戦士の月」、ズートは小さく青白い「賢者の月」とされる。"
    },
    {
        "id": "008",
        "category": "地理・世界観",
        "title": "ミロド惑星",
        "content": "ミロド惑星はボーの隣の惑星で、緑色の海と紫色の空が特徴。この惑星には高度な文明は存在せず、原始的な植物と昆虫のような生命体のみが確認されている。"
    },
    {
        "id": "009",
        "category": "地理・世界観",
        "title": "テシム皇国の首都",
        "content": "テシム皇国の首都ラドーンは巨大な水晶でできた宮殿が中心にある。この水晶宮殿はサン・ジュカールが魔物ジャヒルを倒した場所に建てられたとされる。"
    },
    {
        "id": "010",
        "category": "地理・世界観",
        "title": "ブルカニウム",
        "content": "エシム王国の地域には希少鉱物ブルカニウムが豊富に産出する。この青く輝く鉱物はエネルギー変換効率が非常に高く、宇宙船の動力源として重宝されている。"
    },
    {
        "id": "011",
        "category": "魔法・技術",
        "title": "エガの術",
        "content": "テシム皇国では「エガ」と呼ばれる精神エネルギーを操る術が発達した。熟練者は物体を動かしたり、治癒力を高めたりすることができるという。この術はサン・ジュカールによって広められたとされる。"
    },
    {
        "id": "012",
        "category": "魔法・技術",
        "title": "エシム王国の機械工学",
        "content": "エシム王国ではブルカニウムを用いた機械工学が発展した。彼らの作る機械は小型でありながら強力なエネルギーを生み出し、多くの作業を自動化している。"
    },
    {
        "id": "013",
        "category": "魔法・技術",
        "title": "魔術工学",
        "content": "両国の技術は「魔術工学」という学問分野で統合されつつある。テシムのエガの術とエシムの機械工学を組み合わせることで、より効率的なエネルギー利用が可能になっている。"
    },
    {
        "id": "014",
        "category": "魔法・技術",
        "title": "クレル月の遺跡",
        "content": "クレル月には古代から残る技術遺跡があり、両国の学者が研究している。この遺跡からは現在の技術水準を超える機械の残骸が発見されており、かつての先進文明の存在が示唆されている。"
    },
    {
        "id": "015",
        "category": "文化・習慣",
        "title": "ジュカール祭",
        "content": "テシム皇国では毎年「ジュカール祭」が開催され、初代皇帝の武勇を讃える。この祭りでは若者たちが武術を披露し、最も優れた者に「ジュカールの剣」が授与される。"
    },
    {
        "id": "016",
        "category": "文化・習慣",
        "title": "帰還の儀式",
        "content": "エシム王国では三日月の満ちる夜に「帰還の儀式」という祝祭がある。これはテリペがエシム地方に到着した日を記念するもので、家族の再会と新たな出発を祝う。"
    },
    {
        "id": "017",
        "category": "文化・習慣",
        "title": "絹星草",
        "content": "両国では「絹星草」という植物から作られる布が高級品として珍重される。この植物は夜に淡く光り、その繊維から作られた布は驚くほど軽く強靭である。"
    },
    {
        "id": "018",
        "category": "文化・習慣",
        "title": "ジャヒルの仮面",
        "content": "魔物ジャヒルを模した仮面は不運を避けるお守りとして広く用いられている。特に旅人や冒険者は必ずこの仮面のミニチュアを持ち歩くという。"
    },
    {
        "id": "019",
        "category": "歴史・出来事",
        "title": "第一次統一戦争",
        "content": "テリペとサン・ジスバの争いは「第一次統一戦争」と呼ばれ、惑星ボーの歴史における最大の内戦とされる。この戦いは5年間続き、多くの血が流された。"
    },
    {
        "id": "020",
        "category": "歴史・出来事",
        "title": "ミロド探査",
        "content": "カロン・ジスバによるミロド惑星への飛行は「ミロド探査」と呼ばれ、宇宙時代の幕開けとなった。この探査によって得られた知見は現在の宇宙船技術の基礎となっている。"
    }
]


def save_mythology_data(data_dir="data/boe_mythology"):
    """神話データをファイルに保存する"""
    os.makedirs(data_dir, exist_ok=True)

    # 各項目を個別のテキストファイルとして保存
    for item in BOE_MYTHOLOGY:
        filename = f"{item['id']}_{item['title'].replace(' ', '_')}.txt"
        filepath = os.path.join(data_dir, filename)

        with open(filepath, "w", encoding="utf-8") as f:
            f.write(f"タイトル: {item['title']}\n")
            f.write(f"カテゴリ: {item['category']}\n")
            f.write(f"\n{item['content']}\n")

    # メタデータをJSONとして保存
    metadata = [{
        "id": item["id"],
        "title": item["title"],
        "category": item["category"],
        "filename": f"{item['id']}_{item['title'].replace(' ', '_')}.txt"
    } for item in BOE_MYTHOLOGY]

    with open(os.path.join(data_dir, "metadata.json"), "w", encoding="utf-8") as f:
        json.dump(metadata, f, ensure_ascii=False, indent=2)

    print(f"{len(BOE_MYTHOLOGY)}件の神話データを{data_dir}に保存しました。")


def parse_args():
    """コマンドライン引数をパースする"""
    parser = argparse.ArgumentParser(description="惑星ボー神話データ生成スクリプト")
    parser.add_argument(
        "--output-dir", default="data/boe_mythology", help="出力ディレクトリ")
    return parser.parse_args()


def main():
    """メイン関数"""
    args = parse_args()
    save_mythology_data(args.output_dir)
    return 0


if __name__ == "__main__":
    exit(main())
